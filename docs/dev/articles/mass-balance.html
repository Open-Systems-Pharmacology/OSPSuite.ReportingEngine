<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ospsuite.reportingengine">
<title>Mass Balance â€¢ ospsuite.reportingengine</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Mass Balance">
<meta property="og:description" content="ospsuite.reportingengine">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ospsuite.reportingengine</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/ospsuite-reportingengine.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/add-title-page.html">Add a title page to your workflow report</a>
    <a class="dropdown-item" href="../articles/demography.html">Demography Parameters in Population Workflows</a>
    <a class="dropdown-item" href="../articles/excel-template.html">Excel Template</a>
    <a class="dropdown-item" href="../articles/goodness-of-fit.html">Time profiles and Residuals task</a>
    <a class="dropdown-item" href="../articles/mass-balance.html">Mass Balance</a>
    <a class="dropdown-item" href="../articles/pk-parameters.html">PK parameters</a>
    <a class="dropdown-item" href="../articles/plot-settings.html">Plot settings</a>
    <a class="dropdown-item" href="../articles/pop-pk-parameters.html">PK Parameters in Population Workflows</a>
    <a class="dropdown-item" href="../articles/qualification-workflow.html">Qualification Workflow</a>
    <a class="dropdown-item" href="../articles/sensitivity-analysis.html">Sensitivity Analysis</a>
    <a class="dropdown-item" href="../articles/word-report.html">How to work with word reports</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/open-systems-pharmacology/ospsuite.reportingengine/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Mass Balance</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/open-systems-pharmacology/ospsuite.reportingengine/blob/HEAD/vignettes/mass-balance.Rmd" class="external-link"><code>vignettes/mass-balance.Rmd</code></a></small>
      <div class="d-none name"><code>mass-balance.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/open-systems-pharmacology/ospsuite.reportingengine" class="external-link">ospsuite.reportingengine</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: ospsuite</span></span>
<span><span class="co">#&gt; Loading required package: rClr</span></span>
<span><span class="co">#&gt; Loading the dynamic library for Microsoft .NET runtime...</span></span>
<span><span class="co">#&gt; Loaded Common Language Runtime version 4.0.30319.42000</span></span>
<span><span class="co">#&gt; Loading required package: tlf</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'ospsuite.reportingengine'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:tlf':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     setDefaultErrorbarCapSize</span></span></code></pre></div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>In Mean Model workflows, the Mass Balance task
(<code>plotMassBalance</code>) aims at reporting diagnostics of the
simulation mass balance.</p>
<p>The diagnostic plots correspond to 5 plots for each molecule (or
group of molecules if defined by user) :</p>
<ul>
<li>Plot 1: <strong>Amount vs time</strong>
</li>
<li>Plot 2: <strong>Cumulative amount vs time</strong> in which the
amounts of all the molecule paths included are stacked up.</li>
<li>Plot 3: <strong>Normalized amount vs time</strong> in which the
amounts are normalized by the drug mass applied at the current
time.</li>
<li>Plot 4: <strong>Normalized cumulative amount vs time</strong> in
which the cumulative amounts are normalized by the drug mass applied at
the current time.</li>
<li>Plot 5: <strong>Pie Chart</strong> displaying the fraction of drug
mass at the last simulated time point for all the molecule paths
included.</li>
</ul>
<p>Since version <a href="../news/index.html#ospsuitereportingengine-23">2.3</a>,
normalization uses the current drug mass and not the final drug mass. As
a result, normalized plots 3 and 4 provide more realistic results in
case of multiple applications.</p>
</div>
<div class="section level2">
<h2 id="regular-mass-balance-workflow">Regular mass balance workflow<a class="anchor" aria-label="anchor" href="#regular-mass-balance-workflow"></a>
</h2>
<p>In the example below, the mass balance task is performed using the
default settings. By default, the mass balance is performed for each
unique xenobiotic molecule (check <a href="https://www.open-systems-pharmacology.org/OSPSuite-R/reference/Simulation.html#method-Simulation-allXenobioticFloatingMoleculeNames" class="external-link"><code>Simulation$allXenobioticFloatingMoleculeNames()</code></a>
for more details).</p>
<p>The legend of the mass balance corresponds to the molecule name
associated with the compartment name.</p>
<details><summary><strong>Code</strong>
</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define file paths for pkml simulation</span></span>
<span><span class="va">simulationFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Aciclovir.pkml"</span>, package <span class="op">=</span> <span class="st">"ospsuite.reportingengine"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">simulationSet</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/SimulationSet.html">SimulationSet</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  simulationSetName <span class="op">=</span> <span class="st">"Aciclovir"</span>,</span>
<span>  simulationFile <span class="op">=</span> <span class="va">simulationFile</span></span>
<span><span class="op">)</span></span>
<span><span class="va">massBalanceWorkflow</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/MeanModelWorkflow.html">MeanModelWorkflow</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  simulationSets <span class="op">=</span> <span class="va">simulationSet</span>, </span>
<span>  workflowFolder <span class="op">=</span> <span class="st">"Mass-Balance-Workflow"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:07:40</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span>Reporting Engine Information:</span></span>
<span><span class="co">#&gt;  Date: 21/03/2024 - 12:07:40</span></span>
<span><span class="co">#&gt;  User Information:</span></span>
<span><span class="co">#&gt;  Computer Name: fv-az653-851</span></span>
<span><span class="co">#&gt;  User: runneradmin</span></span>
<span><span class="co">#&gt;  Login: runneradmin</span></span>
<span><span class="co">#&gt;  System is NOT validated</span></span>
<span><span class="co">#&gt;  System versions:</span></span>
<span><span class="co">#&gt;  R version: R version 4.3.3 (2024-02-29 ucrt)</span></span>
<span><span class="co">#&gt;  OSP Suite Package version: 12.0.482</span></span>
<span><span class="co">#&gt;  OSP Reporting Engine version: 2.2</span></span>
<span><span class="co">#&gt;  tlf version: 1.5.165</span></span>
<span></span>
<span><span class="va">massBalanceWorkflow</span><span class="op">$</span><span class="fu">inactivateTasks</span><span class="op">(</span><span class="va">massBalanceWorkflow</span><span class="op">$</span><span class="fu">getAllTasks</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">massBalanceWorkflow</span><span class="op">$</span><span class="fu">activateTasks</span><span class="op">(</span><span class="st">"plotMassBalance"</span><span class="op">)</span></span>
<span><span class="va">massBalanceWorkflow</span><span class="op">$</span><span class="fu">runWorkflow</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:07:40</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span>Starting run of <span style="color: #00BBBB; font-weight: bold; font-style: italic;">Mean Model Workflow</span></span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:07:40</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span>Starting run of <span style="color: #00BBBB; font-weight: bold; font-style: italic;">Plot Mass Balance task</span></span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:07:40</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span>Starting run of <span style="color: #00BBBB; font-weight: bold; font-style: italic;">Plot Mass Balance task</span> for <span style="color: #00BBBB; font-weight: bold; font-style: italic;">Aciclovir</span></span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:07:43</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">! Warning   </span>No molecule paths included in group '<span style="color: #00BBBB; font-weight: bold; font-style: italic;">Aciclovir - Endosome</span>'.</span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:07:44</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">! Warning   </span>No molecule paths included in group '<span style="color: #00BBBB; font-weight: bold; font-style: italic;">Rest of Aciclovir</span>'.</span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:07:53</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span><span style="color: #00BBBB; font-weight: bold; font-style: italic;">Plot Mass Balance task</span> completed in 0.2 min</span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:07:53</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span>Executing: pandoc --embed-resources --standalone --wrap=none --toc --from=markdown+tex_math_dollars+superscript+subscript+raw_attribute --reference-doc="C:/Users/runneradmin/AppData/Local/Temp/Rtmpo1MTza/temp_libpath3a478301b10/ospsuite.reportingengine/extdata/reference.docx" --resource-path="Mass-Balance-Workflow" -t docx -o "Mass-Balance-Workflow/Report-word.docx" "Mass-Balance-Workflow/Report-word.md"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:07:53</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span><span style="color: #00BBBB; font-weight: bold; font-style: italic;">Mean Model Workflow</span> completed in 0.2 min</span></span></code></pre></div>
</details><details><summary><strong>Report</strong>
</summary><img src="figures/report-snapshot-57.png" style="width:100%; border-style: none;"></details>
</div>
<div class="section level2">
<h2 id="mass-balance-settings">Mass balance settings<a class="anchor" aria-label="anchor" href="#mass-balance-settings"></a>
</h2>
<p>The mass balance task can now be customized using settings defined
through the <code>SimulationSet</code> field
<code>massBalanceFile</code> as a <em>json</em> file.</p>
<p>The settings aims at defining criteria for grouping molecule paths
for a molecule or group of molecules. These settings can be useful
especially when the simulation includes metabolites that need to be
appropriately displayed in the diagnostics. For each plot the file needs
to include the following fields:</p>
<ul>
<li>
<code>"Name"</code>: name of the sub-section in report</li>
<li>
<code>"Molecules"</code>: array of the molecule names (or/and
metabolites) to be included in the mass balance</li>
<li>
<code>"Groupings"</code>: array of the grouping names and
criteria</li>
</ul>
<div class="section level3">
<h3 id="groupings">Groupings<a class="anchor" aria-label="anchor" href="#groupings"></a>
</h3>
<p>The field <code>"Groupings"</code> is an array that defines how to
group and label molecule paths in the mass balance diagnostic plots.
Thus, each element of <code>"Groupings"</code> includes the following
fields:</p>
<ul>
<li>
<code>"Name"</code>: reported name of the group</li>
<li>
<code>"Include"</code>: array of included molecule paths</li>
<li>
<code>"Exclude"</code>: array of excluded molecule paths
(optional)</li>
<li>
<code>"ExcludePreviousGroupings"</code>: logical to exclude molecule
paths that have been already included in previous groupings (optional -
default is <code>true</code>)</li>
</ul>
<p>Note that inclusion and exclusion criteria for molecule paths
leverage <a href="https://www.open-systems-pharmacology.org/OSPSuite-R/articles/load-get.html#accessing-entities-of-the-model-and-their-properties---the-path-concept" class="external-link">wild
card symbols (<code>*</code>)</a>.</p>
<p>The most common use case is to include all the paths for specific
compartments such as <em>Plasma</em>. Here this would translate as:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Plasma"</span><span class="fu">,</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="dt">"Include"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"Organism|**|Plasma|Aciclovir"</span><span class="ot">]</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Another use case is when a metabolite is defined using the molecule
name as prefix. Then, the metabolite can be included in the
grouping.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Plasma for Aciclovir and metabolites"</span><span class="fu">,</span> </span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="dt">"Include"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"Organism|**|Plasma|Aciclovir*"</span><span class="ot">]</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="a-workflow-leveraging-mass-balance-settings">A workflow leveraging mass balance settings<a class="anchor" aria-label="anchor" href="#a-workflow-leveraging-mass-balance-settings"></a>
</h3>
<p>In this workflow, the following mass balance settings file is used.
The file is also available in <a href="https://github.com/Open-Systems-Pharmacology/OSPSuite.ReportingEngine/blob/develop/inst/extdata/mass-balance-settings.json" class="external-link">GitHub</a>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    <span class="dt">"MassBalancePlots"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>            <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Name of mass balance sub-section (optional)"</span><span class="fu">,</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>            <span class="dt">"Molecules"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>                <span class="st">"Aciclovir"</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>            <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>            <span class="dt">"Groupings"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>                <span class="fu">{</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>                    <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Intracellular"</span><span class="fu">,</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>                    <span class="dt">"Include"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>                        <span class="st">"Organism|**|Intracellular|Aciclovir*"</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>                    <span class="ot">]</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>                <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>                <span class="fu">{</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>                    <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Plasma &amp; Blood Cells"</span><span class="fu">,</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>                    <span class="dt">"Include"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a>                        <span class="st">"Organism|**|Plasma|Aciclovir*"</span><span class="ot">,</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a>                        <span class="st">"Organism|**|BloodCells|Aciclovir*"</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a>                    <span class="ot">]</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a>                <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a>                <span class="fu">{</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a>                    <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Interstitial"</span><span class="fu">,</span></span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a>                    <span class="dt">"Include"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a>                        <span class="st">"Organism|**|Interstitial|Aciclovir*"</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a>                    <span class="ot">]</span></span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a>                <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a>                <span class="fu">{</span></span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a>                    <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Lumen"</span><span class="fu">,</span></span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a>                    <span class="dt">"Include"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-31"><a href="#cb5-31" tabindex="-1"></a>                        <span class="st">"Organism|Lumen|*|Aciclovir*"</span></span>
<span id="cb5-32"><a href="#cb5-32" tabindex="-1"></a>                    <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb5-33"><a href="#cb5-33" tabindex="-1"></a>                    <span class="dt">"Exclude"</span><span class="fu">:</span><span class="ot">[</span></span>
<span id="cb5-34"><a href="#cb5-34" tabindex="-1"></a>                        <span class="st">"Organism|Lumen|Feces|Aciclovir*"</span></span>
<span id="cb5-35"><a href="#cb5-35" tabindex="-1"></a>                    <span class="ot">]</span></span>
<span id="cb5-36"><a href="#cb5-36" tabindex="-1"></a>                <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-37"><a href="#cb5-37" tabindex="-1"></a>                <span class="fu">{</span></span>
<span id="cb5-38"><a href="#cb5-38" tabindex="-1"></a>                    <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Excreted"</span><span class="fu">,</span></span>
<span id="cb5-39"><a href="#cb5-39" tabindex="-1"></a>                    <span class="dt">"Include"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-40"><a href="#cb5-40" tabindex="-1"></a>                        <span class="st">"Organism|Kidney|Urine|Aciclovir*"</span><span class="ot">,</span></span>
<span id="cb5-41"><a href="#cb5-41" tabindex="-1"></a>                        <span class="st">"Organism|Lumen|Feces|Aciclovir*"</span></span>
<span id="cb5-42"><a href="#cb5-42" tabindex="-1"></a>                    <span class="ot">]</span></span>
<span id="cb5-43"><a href="#cb5-43" tabindex="-1"></a>                <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-44"><a href="#cb5-44" tabindex="-1"></a>                <span class="fu">{</span></span>
<span id="cb5-45"><a href="#cb5-45" tabindex="-1"></a>                    <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Rest of Aciclovir"</span><span class="fu">,</span></span>
<span id="cb5-46"><a href="#cb5-46" tabindex="-1"></a>                    <span class="dt">"Include"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-47"><a href="#cb5-47" tabindex="-1"></a>                        <span class="st">"Organism|**|Aciclovir*"</span></span>
<span id="cb5-48"><a href="#cb5-48" tabindex="-1"></a>                    <span class="ot">]</span></span>
<span id="cb5-49"><a href="#cb5-49" tabindex="-1"></a>                <span class="fu">}</span></span>
<span id="cb5-50"><a href="#cb5-50" tabindex="-1"></a>            <span class="ot">]</span></span>
<span id="cb5-51"><a href="#cb5-51" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-52"><a href="#cb5-52" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb5-53"><a href="#cb5-53" tabindex="-1"></a>            <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Aciclovir Mass Balance focus on Fat"</span><span class="fu">,</span></span>
<span id="cb5-54"><a href="#cb5-54" tabindex="-1"></a>            <span class="dt">"Molecules"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-55"><a href="#cb5-55" tabindex="-1"></a>                <span class="st">"Aciclovir"</span></span>
<span id="cb5-56"><a href="#cb5-56" tabindex="-1"></a>            <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb5-57"><a href="#cb5-57" tabindex="-1"></a>            <span class="dt">"Groupings"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-58"><a href="#cb5-58" tabindex="-1"></a>                <span class="fu">{</span></span>
<span id="cb5-59"><a href="#cb5-59" tabindex="-1"></a>                    <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Fat"</span><span class="fu">,</span></span>
<span id="cb5-60"><a href="#cb5-60" tabindex="-1"></a>                    <span class="dt">"Include"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-61"><a href="#cb5-61" tabindex="-1"></a>                        <span class="st">"Organism|Fat|*|Aciclovir"</span></span>
<span id="cb5-62"><a href="#cb5-62" tabindex="-1"></a>                    <span class="ot">]</span></span>
<span id="cb5-63"><a href="#cb5-63" tabindex="-1"></a>                <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-64"><a href="#cb5-64" tabindex="-1"></a>                <span class="fu">{</span></span>
<span id="cb5-65"><a href="#cb5-65" tabindex="-1"></a>                    <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Plasma &amp; Blood Cells"</span><span class="fu">,</span></span>
<span id="cb5-66"><a href="#cb5-66" tabindex="-1"></a>                    <span class="dt">"Include"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-67"><a href="#cb5-67" tabindex="-1"></a>                        <span class="st">"Organism|**|Plasma|Aciclovir"</span><span class="ot">,</span></span>
<span id="cb5-68"><a href="#cb5-68" tabindex="-1"></a>                        <span class="st">"Organism|**|BloodCells|Aciclovir"</span></span>
<span id="cb5-69"><a href="#cb5-69" tabindex="-1"></a>                    <span class="ot">]</span></span>
<span id="cb5-70"><a href="#cb5-70" tabindex="-1"></a>                <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-71"><a href="#cb5-71" tabindex="-1"></a>                <span class="fu">{</span></span>
<span id="cb5-72"><a href="#cb5-72" tabindex="-1"></a>                    <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Excreted"</span><span class="fu">,</span></span>
<span id="cb5-73"><a href="#cb5-73" tabindex="-1"></a>                    <span class="dt">"Include"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-74"><a href="#cb5-74" tabindex="-1"></a>                        <span class="st">"Organism|Kidney|Urine|Aciclovir"</span><span class="ot">,</span></span>
<span id="cb5-75"><a href="#cb5-75" tabindex="-1"></a>                        <span class="st">"Organism|Lumen|Feces|Aciclovir"</span></span>
<span id="cb5-76"><a href="#cb5-76" tabindex="-1"></a>                    <span class="ot">]</span></span>
<span id="cb5-77"><a href="#cb5-77" tabindex="-1"></a>                <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb5-78"><a href="#cb5-78" tabindex="-1"></a>                <span class="fu">{</span></span>
<span id="cb5-79"><a href="#cb5-79" tabindex="-1"></a>                    <span class="dt">"Name"</span><span class="fu">:</span> <span class="st">"Rest"</span><span class="fu">,</span></span>
<span id="cb5-80"><a href="#cb5-80" tabindex="-1"></a>                    <span class="dt">"Include"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb5-81"><a href="#cb5-81" tabindex="-1"></a>                        <span class="st">"Organism|**|Aciclovir"</span></span>
<span id="cb5-82"><a href="#cb5-82" tabindex="-1"></a>                    <span class="ot">]</span></span>
<span id="cb5-83"><a href="#cb5-83" tabindex="-1"></a>                <span class="fu">}</span></span>
<span id="cb5-84"><a href="#cb5-84" tabindex="-1"></a>            <span class="ot">]</span></span>
<span id="cb5-85"><a href="#cb5-85" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb5-86"><a href="#cb5-86" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb5-87"><a href="#cb5-87" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The workflow is similar to the previous one except that the mass
balance settings file is provided to the <code>SimulationSet</code>
object.</p>
<details><summary><strong>Code</strong>
</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">simulationFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Aciclovir.pkml"</span>, package <span class="op">=</span> <span class="st">"ospsuite.reportingengine"</span><span class="op">)</span></span>
<span><span class="va">massBalanceFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"mass-balance-settings.json"</span>, package <span class="op">=</span> <span class="st">"ospsuite.reportingengine"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">simulationSet</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/SimulationSet.html">SimulationSet</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  simulationSetName <span class="op">=</span> <span class="st">"Aciclovir"</span>,</span>
<span>  simulationFile <span class="op">=</span> <span class="va">simulationFile</span>,</span>
<span>  massBalanceFile <span class="op">=</span> <span class="va">massBalanceFile</span></span>
<span><span class="op">)</span></span>
<span><span class="va">massBalanceWorkflow</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/MeanModelWorkflow.html">MeanModelWorkflow</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  simulationSets <span class="op">=</span> <span class="va">simulationSet</span>, </span>
<span>  workflowFolder <span class="op">=</span> <span class="st">"Mass-Balance-Workflow"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:07:57</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span>Reporting Engine Information:</span></span>
<span><span class="co">#&gt;  Date: 21/03/2024 - 12:07:57</span></span>
<span><span class="co">#&gt;  User Information:</span></span>
<span><span class="co">#&gt;  Computer Name: fv-az653-851</span></span>
<span><span class="co">#&gt;  User: runneradmin</span></span>
<span><span class="co">#&gt;  Login: runneradmin</span></span>
<span><span class="co">#&gt;  System is NOT validated</span></span>
<span><span class="co">#&gt;  System versions:</span></span>
<span><span class="co">#&gt;  R version: R version 4.3.3 (2024-02-29 ucrt)</span></span>
<span><span class="co">#&gt;  OSP Suite Package version: 12.0.482</span></span>
<span><span class="co">#&gt;  OSP Reporting Engine version: 2.2</span></span>
<span><span class="co">#&gt;  tlf version: 1.5.165</span></span>
<span></span>
<span><span class="va">massBalanceWorkflow</span><span class="op">$</span><span class="fu">inactivateTasks</span><span class="op">(</span><span class="va">massBalanceWorkflow</span><span class="op">$</span><span class="fu">getAllTasks</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">massBalanceWorkflow</span><span class="op">$</span><span class="fu">activateTasks</span><span class="op">(</span><span class="st">"plotMassBalance"</span><span class="op">)</span></span>
<span><span class="va">massBalanceWorkflow</span><span class="op">$</span><span class="fu">runWorkflow</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:07:57</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span>Starting run of <span style="color: #00BBBB; font-weight: bold; font-style: italic;">Mean Model Workflow</span></span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:07:57</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span>Starting run of <span style="color: #00BBBB; font-weight: bold; font-style: italic;">Plot Mass Balance task</span></span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:07:57</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span>Starting run of <span style="color: #00BBBB; font-weight: bold; font-style: italic;">Plot Mass Balance task</span> for <span style="color: #00BBBB; font-weight: bold; font-style: italic;">Aciclovir</span></span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:08:17</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span><span style="color: #00BBBB; font-weight: bold; font-style: italic;">Plot Mass Balance task</span> completed in 0.3 min</span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:08:17</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span>Executing: pandoc --embed-resources --standalone --wrap=none --toc --from=markdown+tex_math_dollars+superscript+subscript+raw_attribute --reference-doc="C:/Users/runneradmin/AppData/Local/Temp/Rtmpo1MTza/temp_libpath3a478301b10/ospsuite.reportingengine/extdata/reference.docx" --resource-path="Mass-Balance-Workflow" -t docx -o "Mass-Balance-Workflow/Report-word.docx" "Mass-Balance-Workflow/Report-word.md"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 21/03/2024 - 12:08:17</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00; font-weight: bold;">i Info  </span><span style="color: #00BBBB; font-weight: bold; font-style: italic;">Mean Model Workflow</span> completed in 0.3 min</span></span></code></pre></div>
</details><p>Since the settings included 2 plots, the report includes 2
sub-sections.</p>
<details><summary><strong>Report</strong>
</summary><img src="figures/report-snapshot-58.png" style="width:100%; border-style: none;"></details>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Michael Sevestre, Juri Solodenko, Pierre Chelle, Abdullah Hamadeh.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
