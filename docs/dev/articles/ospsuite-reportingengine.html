<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ospsuite.reportingengine">
<title>Get Started • ospsuite.reportingengine</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Started">
<meta property="og:description" content="ospsuite.reportingengine">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ospsuite.reportingengine</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/ospsuite-reportingengine.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/add-title-page.html">Add a title page to your workflow report</a>
    <a class="dropdown-item" href="../articles/demography.html">Demography Parameters in Population Workflows</a>
    <a class="dropdown-item" href="../articles/excel-template.html">Excel Template</a>
    <a class="dropdown-item" href="../articles/goodness-of-fit.html">Time profiles and Residuals task</a>
    <a class="dropdown-item" href="../articles/mass-balance.html">Mass Balance</a>
    <a class="dropdown-item" href="../articles/pk-parameters.html">PK parameters</a>
    <a class="dropdown-item" href="../articles/plot-settings.html">Plot settings</a>
    <a class="dropdown-item" href="../articles/pop-pk-parameters.html">PK Parameters in Population Workflows</a>
    <a class="dropdown-item" href="../articles/qualification-workflow.html">Qualification Workflow</a>
    <a class="dropdown-item" href="../articles/sensitivity-analysis.html">Sensitivity Analysis</a>
    <a class="dropdown-item" href="../articles/word-report.html">How to work with word reports</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/open-systems-pharmacology/ospsuite.reportingengine/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Get Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/open-systems-pharmacology/ospsuite.reportingengine/blob/HEAD/vignettes/ospsuite-reportingengine.Rmd" class="external-link"><code>vignettes/ospsuite-reportingengine.Rmd</code></a></small>
      <div class="d-none name"><code>ospsuite-reportingengine.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/open-systems-pharmacology/ospsuite.reportingengine" class="external-link">ospsuite.reportingengine</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: ospsuite.reportingengine</span></span>
<span><span class="co">#&gt; Loading required package: ospsuite</span></span>
<span><span class="co">#&gt; Loading required package: rClr</span></span>
<span><span class="co">#&gt; Loading the dynamic library for Microsoft .NET runtime...</span></span>
<span><span class="co">#&gt; Loaded Common Language Runtime version 4.0.30319.42000</span></span>
<span><span class="co">#&gt; Loading required package: tlf</span></span></code></pre></div>
<p>This vignette introduces the notions and objects implemented in the
OSP-Suite Reporting Engine package
(<code>ospsuite.reportingengine</code>).</p>
<div class="section level2">
<h2 id="introduction">1. Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<div class="section level3">
<h3 id="notion-of-r6-objects">1.1. Notion of R6 objects<a class="anchor" aria-label="anchor" href="#notion-of-r6-objects"></a>
</h3>
<p>The <code>ospsuite.reportingengine</code> package aims at
facilitating the design and build of reports evaluating PBPK models
developed on PK-Sim or/and MoBi.</p>
<p>To this end, the package benefits from the concept of R6 classes
(similar to reference classes) which allows to define structured objects
whose fields can be any object such as properties, methods or even other
R6 objects. R6 objects, or objects from R6 class, presents some
peculiarities.</p>
<ul>
<li>They are usually initialized using the method <code>$new(...)</code>
(e.g. <code>r6Object &lt;- R6Class$new()</code>).</li>
<li>Similarly to objects of class list, fields from R6 objects can be
called using either <code>$fieldName</code> or
<code>[[fieldName]]</code> (e.g. <code>r6Object$method()</code> or
<code>r6Object[[property]]</code>).</li>
<li>The R6 class also integrates the concept of inheritance: an R6
object will get the attributes from its class but will also inherit
properties and methods from a parent class.</li>
</ul>
</div>
<div class="section level3">
<h3 id="notion-of-workflow">1.2. Notion of workflow<a class="anchor" aria-label="anchor" href="#notion-of-workflow"></a>
</h3>
<p>The <code>ospsuite.reportingengine</code> package is built around 3
central R6 classes <strong><code>MeanModelWorkflow</code></strong>,
<strong><code>PopulationWorkflow</code></strong> and
<strong><code>QualificationWorkflow</code></strong> derived from the
parent R6 class <code>Workflow</code>. The creation of
<code>MeanModelWorkflow</code> or <code>PopulationWorkflow</code>
objects provides a structured environment with methods and properties
that facilitate the design, run and report of the evaluations of PBPK
models developed on PK-Sim or/and MoBi. For
<code>QualificationWorkflow</code> objects, more details are available
in a dedicated <a href="./qualification-workflow.html">article</a>. The
<code>Worklow</code> objects combine 2 features defined as R6
objects:</p>
<ul>
<li>
<code>SimulationSet</code> and <code>PopulationSimulationSet</code>
objects defines which and how model(s) and/or data can be used by the
workflow (developed in more details in section <a href="#id_3-simulation-sets">3</a>). These objects need to be created
before the creation of workflow objects as they are required to create
the workflow.</li>
<li>
<code>Task</code> objects define the evaluations to be performed by
the workflow. These objects are directly created and included upon
creation of the <code>Workflow</code> objects (developed in more details
in section <a href="#id_4-tasks">4</a>). Their settings can be checked
and updated after creation.</li>
</ul>
</div>
<div class="section level3">
<h3 id="nomenclature">1.3. Nomenclature<a class="anchor" aria-label="anchor" href="#nomenclature"></a>
</h3>
<p>Table 1 enumerates some of the main instances of the
<code>ospsuite.reportingengine</code> package usually defined by users
during the design of a workflow. The tab <a href="../reference/index.html">Reference</a> documents available classes
and functions exported by the <code>ospsuite.reportingengine</code>
package. The comprehensive documentation and usage of each of these
objects is accessible in the tab <strong>Reference</strong>.</p>
<p><strong>Table 1: Nomenclature of
<code>ospsuite.reportingengine</code> main instances</strong></p>
<table class="table">
<colgroup>
<col width="62%">
<col width="37%">
</colgroup>
<thead><tr class="header">
<th><strong>Workflow objects</strong></th>
<th><strong>Use case</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="../reference/MeanModelWorkflow.html">MeanModelWorkflow</a></td>
<td>Defined by user</td>
</tr>
<tr class="even">
<td><a href="../reference/PopulationWorkflow.html">PopulationWorkflow</a></td>
<td>Defined by user</td>
</tr>
<tr class="odd">
<td><a href="../reference/loadQualificationWorkflow.html">QualificationWorkflow</a></td>
<td>Build in <a href="../reference/QualificationWorkflow.html">loadQualificationWorkflow</a>
</td>
</tr>
<tr class="even">
<td><strong>Simulation Set objects</strong></td>
<td><strong>Use case</strong></td>
</tr>
<tr class="odd">
<td><a href="../reference/SimulationSet.html">SimulationSet</a></td>
<td>Defined by user</td>
</tr>
<tr class="even">
<td><a href="../reference/PopulationSimulationSet.html">PopulationSimulationSet</a></td>
<td>Defined by user</td>
</tr>
<tr class="odd">
<td><a href="../reference/ConfigurationPlan.html">ConfigurationPlan</a></td>
<td>Build in <a href="../reference/QualificationWorkflow.html">loadQualificationWorkflow</a>
</td>
</tr>
<tr class="even">
<td><strong>Output path and PK parameter objects</strong></td>
<td><strong>Use case</strong></td>
</tr>
<tr class="odd">
<td><a href="../reference/Output.html">Output</a></td>
<td>Defined by user</td>
</tr>
<tr class="even">
<td><a href="../reference/PkParameterInfo.html">PkParameterInfo</a></td>
<td>Defined by user</td>
</tr>
<tr class="odd">
<td><strong>Workflow task objects</strong></td>
<td><strong>Use case</strong></td>
</tr>
<tr class="even">
<td><a href="../reference/Task.html">Task</a></td>
<td>Build in workflow objects</td>
</tr>
<tr class="odd">
<td><a href="../reference/SimulationTask.html">SimulationTask</a></td>
<td>Build in workflow objects</td>
</tr>
<tr class="even">
<td><a href="../reference/SensitivityAnalysisTask.html">SensitivityAnalysisTask</a></td>
<td>Build in workflow objects</td>
</tr>
<tr class="odd">
<td><a href="../reference/PopulationSensitivityAnalysisTask.html">PopulationSensitivityAnalysisTask</a></td>
<td>Build in workflow objects</td>
</tr>
<tr class="even">
<td><a href="../reference/QualificationTask.html">QualificationTask</a></td>
<td>Build in <a href="../reference/loadQualificationWorkflow.html">QualificationWorkflow</a>
objects</td>
</tr>
<tr class="odd">
<td><a href="../reference/PlotTask.html">PlotTask</a></td>
<td>Build in workflow objects</td>
</tr>
<tr class="even">
<td><a href="../reference/PopulationPlotTask.html">PopulationPlotTask</a></td>
<td>Build in <a href="../reference/PopulationWorkflow.html">PopulationWorkflow</a>
objects</td>
</tr>
<tr class="odd">
<td><a href="../reference/GofPlotTask.html">GofPlotTask</a></td>
<td>Build in workflow objects</td>
</tr>
<tr class="even">
<td><strong>Workflow task settings objects</strong></td>
<td><strong>Use case</strong></td>
</tr>
<tr class="odd">
<td>PlotSettings</td>
<td>Build in workflow objects</td>
</tr>
<tr class="even">
<td><a href="../reference/SensitivityPlotSettings.html">SensitivityPlotSettings</a></td>
<td>Build in workflow objects</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="general-scheme">1.4. General scheme<a class="anchor" aria-label="anchor" href="#general-scheme"></a>
</h3>
<p>In order to define and run appropriately a Workflow object, a few
steps are required:</p>
<ul>
<li><ol style="list-style-type: decimal">
<li>Load the <code>ospsuite.reportingengine</code> package</li>
</ol></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/open-systems-pharmacology/ospsuite.reportingengine" class="external-link">ospsuite.reportingengine</a></span><span class="op">)</span></span></code></pre></div>
<ul>
<li><ol start="2" style="list-style-type: decimal">
<li>Define the simulation outputs possibly with their PK parameters</li>
</ol></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va"><a href="../reference/Output.html">Output</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ul>
<li><ol start="3" style="list-style-type: decimal">
<li>Define the simulation sets possibly mapping simulations to observed
data</li>
</ol></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va"><a href="../reference/SimulationSet.html">SimulationSet</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ul>
<li><ol start="4" style="list-style-type: decimal">
<li>Define the workflow and its result folder</li>
</ol></li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va"><a href="../reference/Workflow.html">Workflow</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ul>
<li><ol start="5" style="list-style-type: decimal">
<li>Define the workflow tasks</li>
</ol></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">workflow</span><span class="op">$</span><span class="fu">activateTasks</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ul>
<li><ol start="6" style="list-style-type: decimal">
<li>Run the workflow</li>
</ol></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">workflow</span><span class="op">$</span><span class="fu">runWorkflow</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>A working example of workflow script is provided below for reporting
a time profile plot on <em>Minimodel2.pkml</em>.</p>
<details><summary><strong>Code</strong>
</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get the pkml simulation file: "MiniModel2.pkml"</span></span>
<span><span class="va">simulationFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"MiniModel2.pkml"</span>,</span>
<span>  package <span class="op">=</span> <span class="st">"ospsuite.reportingengine"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create Output objects which define output paths that will be plotted by the workflow</span></span>
<span><span class="va">outputA</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Output.html">Output</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="st">"Organism|A|Concentration in container"</span>,</span>
<span>  displayName <span class="op">=</span> <span class="st">"Concentration of A"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">outputB</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Output.html">Output</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="st">"Organism|B|Concentration in container"</span>,</span>
<span>  displayName <span class="op">=</span> <span class="st">"Concentration of B"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a SimulationSet object which defines the model and outputs to evaluate</span></span>
<span><span class="va">myExampleSet</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/SimulationSet.html">SimulationSet</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  simulationSetName <span class="op">=</span> <span class="st">"My example"</span>,</span>
<span>  simulationFile <span class="op">=</span> <span class="va">simulationFile</span>,</span>
<span>  outputs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">outputA</span>, <span class="va">outputB</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create the workflow object</span></span>
<span><span class="va">myExampleWorkflow</span> <span class="op">&lt;-</span></span>
<span>  <span class="va"><a href="../reference/MeanModelWorkflow.html">MeanModelWorkflow</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>    simulationSets <span class="op">=</span> <span class="va">myExampleSet</span>,</span>
<span>    workflowFolder <span class="op">=</span> <span class="st">"myExample-Results"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Set the workflow tasks to be run</span></span>
<span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="fu">activateTasks</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"simulate"</span>, <span class="st">"plotTimeProfilesAndResiduals"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run the workflow</span></span>
<span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="fu">runWorkflow</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>For this example, the list of files and folders generated by the
workflow are:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="va">workflowFolder</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "log-debug.txt"     "log-info.txt"      "Report-word.md"   </span></span>
<span><span class="co">#&gt; [4] "Report.docx"       "Report.md"         "SimulationResults"</span></span>
<span><span class="co">#&gt; [7] "TimeProfiles"</span></span></code></pre></div>
</details><p>The associated report will be as follows:</p>
<details><summary><strong>Report</strong>
</summary><img src="figures/report-snapshot-59.png" style="width:100%; border-style: none;"></details>
</div>
</div>
<div class="section level2">
<h2 id="workflow">2. Workflow<a class="anchor" aria-label="anchor" href="#workflow"></a>
</h2>
<p><code>Workflow</code> objects define which models are evaluated, how
they are evaluated and how the evaluations are reported.</p>
<p>In the <code>ospsuite.reportingengine</code> package, two types of
<code>Workflow</code> are available and can be created:</p>
<ol style="list-style-type: decimal">
<li>
<code>MeanModelWorkflow</code> dedicated on evaluations specific to
mean models</li>
<li>
<code>PopulationWorkflow</code> dedicated on evaluations specific to
population models</li>
</ol>
<div class="section level3">
<h3 id="meanmodelworkflow">2.1. MeanModelWorkflow<a class="anchor" aria-label="anchor" href="#meanmodelworkflow"></a>
</h3>
<p>Workflows defined by <code>MeanModelWorkflow</code> objects can be
illustrated by Figure 1.</p>
<p>The blue frame corresponds to the inputs of the workflow. These
inputs need to be defined using <code>SimulationSet</code> objects. For
workflows with multiple simulations and observed datasets, a list of
<code>SimulationSet</code> objects can be input instead of one unique
<code>SimulationSet</code> object. Within a <code>Workflow</code>
object, the simulation sets are accessible from the
<code>simulationStructures</code> lists which also provides relevant
information about input/output files and folders</p>
<p>The black frames correspond to the tasks or evaluations performed by
the workflow. These tasks are defined using <code>Task</code> objects
built in every <code>Workflow</code> object, meaning there is no need to
input them when creating a <code>Workflow</code> object. Users access,
update and switch the task on/off tasks after creation of their
<code>Workflow</code>.</p>
<pre><code><span><span class="co">#&gt; [1] FALSE</span></span></code></pre>
<div class="figure" style="text-align: center">
<img src="figures/mean-model-workflow-input-and-tasks.png" alt="Figure 1: Mean model workflow inputs and tasks" width="100%"><p class="caption">
Figure 1: Mean model workflow inputs and tasks
</p>
</div>
</div>
<div class="section level3">
<h3 id="populationworkflow">2.2. PopulationWorkflow<a class="anchor" aria-label="anchor" href="#populationworkflow"></a>
</h3>
<p>Workflows defined by <code>PopulationWorkflow</code> objects can be
illustrated by Figure 2.</p>
<p>The blue frame corresponds to the inputs of the workflow. These
inputs need to be defined using <code>PopulationSimulationSet</code>
objects. For workflows with multiple simulations and observed datasets,
a list of <code>PopulationSimulationSet</code> objects can be input
instead of one unique <code>PopulationSimulationSet</code> object.
Within a <code>Workflow</code> object, the simulation sets are
accessible from the <code>simulationStructures</code> lists which also
provides relevant information about input/output files and folders</p>
<p>The black frames correspond to the tasks or evaluations performed by
the workflow. These tasks are defined using <code>Task</code> objects
built in every <code>Workflow</code> object, meaning there is no need to
input them when creating a <code>Workflow</code> object. Users access,
update and switch the task on/off tasks after creation of their
<code>Workflow</code>.</p>
<p>Some tasks of population workflows perform a direct comparison of the
simulation sets (e.g. <code>plotDemography</code> or
<code>plotPKParameters</code>). Such comparisons can be different
according to the selected population workflow types. Three population
workflow types are available in <code>ospsuite.reportingengine</code>
and defined in <code>PopulationWorkflowTypes</code>:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Pediatric</strong> (<code>workflowType = "pediatric"</code>)
<ul>
<li>All properties (physiology and PK Parameter) are plotted vs. age and
weight,</li>
<li>The time profiles are plotted in comparison to a reference
population the sensitivity analysis is done on all populations except
the reference population</li>
</ul>
</li>
<li>
<strong>Parallel Comparison</strong>
(<code>workflowType = "parallelComparison"</code>)
<ul>
<li>PK parameter are plotted parallel in Box-Whisker plots without a
reference population,</li>
<li>If a reference population is given, the time profiles are plotted in
comparison to this population</li>
<li>The sensitivity analysis is done on all populations</li>
</ul>
</li>
<li>
<strong>Ratio Comparison</strong>
(<code>workflowType = "ratioComparison"</code>)
<ul>
<li>Same as parallel comparison, but for the PK Parameter additional the
ratio of the PK Parameter to the reference population is calculated and
plotted in box-whisker plots</li>
</ul>
</li>
</ol>
<pre><code><span><span class="co">#&gt; [1] FALSE</span></span></code></pre>
<div class="figure" style="text-align: center">
<img src="figures/population-workflow-input-and-tasks.png" alt="Figure 2: Population workflow inputs and tasks" width="100%"><p class="caption">
Figure 2: Population workflow inputs and tasks
</p>
</div>
</div>
<div class="section level3">
<h3 id="qualification-workflow">2.3. Qualification Workflow<a class="anchor" aria-label="anchor" href="#qualification-workflow"></a>
</h3>
<p>Another type of workflow can be defined by
<code>QualificationWorkflow</code> objects using a configuration plan
for qualification purposes. The article <a href="./qualification-workflow.html">Qualification Workflow</a> details
how to build and use such <code>QualificationWorkflow</code>
objects.</p>
</div>
<div class="section level3">
<h3 id="creation-of-a-workflow">2.4. Creation of a Workflow<a class="anchor" aria-label="anchor" href="#creation-of-a-workflow"></a>
</h3>
<p>To create a <code>MeanModelWorkflow</code> or a
<code>PopulationWorkflow</code> object, the method <code>$new()</code>
needs to be used with at least the inputs defined below.</p>
<ul>
<li>For mean model workflows:</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myWorkflow</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/MeanModelWorkflow.html">MeanModelWorkflow</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">simulationSets</span>, <span class="va">workflowFolder</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>For population workflows:</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myWorkflow</span> <span class="op">&lt;-</span> </span>
<span><span class="va"><a href="../reference/PopulationWorkflow.html">PopulationWorkflow</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">workflowType</span>, <span class="va">simulationSets</span>, <span class="va">workflowFolder</span><span class="op">)</span></span></code></pre></div>
<p>where the input <code>simulationSets</code> is a list of
<code>SimulationSet</code> objects for a mean model workflow, and a list
of <code>PopulationSimulationSet</code> objects for a population
workflow.</p>
<p>The input <code>workflowFolder</code> is the name of the folder in
which the workflow outputs are saved. As illustrated in Figures 1 and 2,
some tasks use outputs obtained from previous tasks. If the directory
specified in <code>workflowFolder</code> contains such outputs, they
will be used by the current workflow. This latter option can be useful
for updating and running only parts of the workflow without having to
perform all the simulations every time.</p>
<p>The input <code>workflowType</code> is one of the 3 population
workflow types as defined by <code>PopulationWorkflowTypes</code>.</p>
<p>Other optional inputs can be added when creating a workflow:</p>
<ul>
<li>
<code>createWordReport</code>: logical defining if a word version
(.docx) of the report should be saved besides its markdown version
(.md). The default value for this option is <code>TRUE</code>, meaning
that a report in word is also created.</li>
<li>
<code>watermark</code>: character defining the text to display in
figures background. The default value is <code>NULL</code>, in which
case the text “preliminary results” will be displayed in the figures for
all computers using an non-validated environment.</li>
<li>
<code>simulationSetDescriptor</code>: character defining a
descriptor of how simulation sets should be indicated in reports
(e.g. “scenario”, “set”, “simulation”, or “population”). The default
value for this option is <code>NULL</code>, meaning that there won’t be
any descriptor of the simulation sets.</li>
</ul>
</div>
<div class="section level3">
<h3 id="workflow-built-in-methods-and-properties">2.5. Workflow built in methods and properties<a class="anchor" aria-label="anchor" href="#workflow-built-in-methods-and-properties"></a>
</h3>
<p>After creation of a <code>Workflow</code> object, some built in
methods and properties are available (using the character <code>$</code>
after the name of the object).</p>
<p>Most of the workflow properties correspond to the inputs used to
create the workflow and includes <code>createWordReport</code>,
<code>workflowFolder</code>, <code>reportFilePath</code>, the list
<code>simulationStructures</code> and the workflow tasks (developed in
section <a href="#id_4-tasks">4</a>).</p>
<p>Additionally, the methods listed below can be used to access relevant
information about the workflow:</p>
<ul>
<li>
<code>printReportingEngineInfo()</code>: prints information about
the environment and packages currently used.</li>
<li>
<code>getWatermark()</code>: prints the watermark to be displayed by
the workflow.</li>
<li>
<code><a href="https://www.open-systems-pharmacology.org/OSPSuite-R/reference/getParameterDisplayPaths.html" class="external-link">getParameterDisplayPaths()</a></code>: prints the mapping between
parameters and their display paths</li>
<li>
<code><a href="../reference/getSimulationDescriptor.html">getSimulationDescriptor()</a></code>: prints the simulation
descriptor to be used by the workflow</li>
<li>
<code>getAllTasks()</code>: prints the names of all the workflow
available tasks</li>
<li>
<code>getAllPlotTasks()</code>: prints the names of all the workflow
plot tasks</li>
<li>
<code>getActiveTasks()</code>: prints the names of all the workflow
active tasks</li>
<li>
<code>getInactiveTasks()</code>: prints the names of all the
workflow inactive tasks</li>
</ul>
<p>To update some of the workflow properties, the methods listed below
can be used:</p>
<ul>
<li>
<code>setWatermark(watermark)</code>: set the watermark to be
displayed by the workflow. The input <code>watermark</code> is of type
character.</li>
<li>
<code>setParameterDisplayPaths(parameterDisplayPaths)</code>: set
the the mapping between parameters and their display paths. The input
<code>parameterDisplayPaths</code> is of type data.frame and includes
“parameter” and “displayPath” in its variables. External functions can
also be used instead:
<ul>
<li><code>setWorkflowParameterDisplayPaths(parameterDisplayPaths, workflow)</code></li>
<li><code>setWorkflowParameterDisplayPathsFromFile(fileName, workflow)</code></li>
</ul>
</li>
<li>
<code>setSimulationDescriptor(text)</code>: set the simulation
descriptor of the workflow. The input <code>text</code> is of type
character.</li>
</ul>
<p>Finally, the method <code>runWorkflow()</code> runs the simulations
and analyses of the models, and also saves the evaluations and their
report.</p>
</div>
</div>
<div class="section level2">
<h2 id="simulation-sets">3. Simulation sets<a class="anchor" aria-label="anchor" href="#simulation-sets"></a>
</h2>
<p><code>SimulationSet</code> and <code>PopulationSimulationSet</code>
objects includes all the relevant information needed to report the
evaluations of a model.</p>
<p>Below is the syntax for creating such simulation sets, the next
sub-sections will provide more details on each input:</p>
<p><strong>Simulation Set</strong></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va"><a href="../reference/SimulationSet.html">SimulationSet</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="va">simulationSetName</span>, </span>
<span>  <span class="va">simulationFile</span>, </span>
<span>  <span class="va">outputs</span>,</span>
<span>  <span class="va">dataSource</span>,</span>
<span>  <span class="va">dataSelection</span>,</span>
<span>  <span class="va">applicationRanges</span>,</span>
<span>  <span class="va">timeUnit</span>,</span>
<span>  <span class="va">timeOffset</span>,</span>
<span>  <span class="va">minimumSimulationEndTime</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Population Simulation Set</strong></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va"><a href="../reference/PopulationSimulationSet.html">PopulationSimulationSet</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="va">referencePopulation</span>,</span>
<span>  <span class="va">simulationSetName</span>, </span>
<span>  <span class="va">simulationFile</span>,</span>
<span>  <span class="va">populationFile</span>,</span>
<span>  <span class="va">studyDesignFile</span>, </span>
<span>  <span class="va">plotReferenceObsData</span>,</span>
<span>  <span class="va">outputs</span>, </span>
<span>  <span class="va">dataSource</span>,</span>
<span>  <span class="va">dataSelection</span>,</span>
<span>  <span class="va">applicationRanges</span>,</span>
<span>  <span class="va">timeUnit</span>,</span>
<span>  <span class="va">timeOffset</span>,</span>
<span>  <span class="va">minimumSimulationEndTime</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="simulation-file">3.1. Simulation file<a class="anchor" aria-label="anchor" href="#simulation-file"></a>
</h3>
<p>A simulation file, <code>simulationFile</code> is an export of a
simulation from MoBi or PK-SIM in pkml format. Display names for the
simulation set can be provided using <code>simulationSetName</code>.</p>
</div>
<div class="section level3">
<h3 id="population-file">3.2. Population file<a class="anchor" aria-label="anchor" href="#population-file"></a>
</h3>
<p>A population file, <code>populationFile</code>, is collection of
parameter paths and parameter values normally an export of a population
from PK-SIM in csv format. It is also possible to use an M&amp;S
activity-specific population file, which has the “PK-Sim” format, but
was manipulated after the export from PK-SIM or was generated outside of
PK-Sim. The generation of the population file than must be validated.
Display names for the population can be provided using
<code>simulationSetName</code>.</p>
<div class="section level4">
<h4 id="study-design-file">3.2.1. Study Design file<a class="anchor" aria-label="anchor" href="#study-design-file"></a>
</h4>
<p>The study design file, <code>studyDesignFile</code>, contains
additional information on the study design, e.g. a body weight dependent
dose in a pediatric study. A regular csv format is expected for such a
file.</p>
<p>The example below shows a template of such a study design
content.</p>
<table class="table">
<caption>Table 2: Example of study design content</caption>
<colgroup>
<col width="21%">
<col width="21%">
<col width="14%">
<col width="42%">
</colgroup>
<thead><tr class="header">
<th align="left">Organism|Weight</th>
<th align="left">Organism|Weight</th>
<th align="left">Gender</th>
<th align="left">Applications|IV Bolus|DrugMass</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">kg</td>
<td align="left">kg</td>
<td align="left"></td>
<td align="left">nmol</td>
</tr>
<tr class="even">
<td align="left">SOURCE_MIN</td>
<td align="left">SOURCE_MAX</td>
<td align="left">SOURCE_EQUALS</td>
<td align="left">TARGET</td>
</tr>
<tr class="odd">
<td align="left">20</td>
<td align="left">40</td>
<td align="left">MALE</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="left">20</td>
<td align="left">40</td>
<td align="left">FEMALE</td>
<td align="left">2.5</td>
</tr>
<tr class="odd">
<td align="left">40</td>
<td align="left">60</td>
<td align="left">MALE</td>
<td align="left">10</td>
</tr>
<tr class="even">
<td align="left">40</td>
<td align="left">60</td>
<td align="left">FEMALE</td>
<td align="left">14</td>
</tr>
<tr class="odd">
<td align="left">60</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">20</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="format-of-data-files">3.3. Format of data files<a class="anchor" aria-label="anchor" href="#format-of-data-files"></a>
</h3>
<p><strong>If the workflow uses data, two files must be provided within
a <code>DataSource</code> object</strong> as follows:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va"><a href="../reference/DataSource.html">DataSource</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">dataFile</span>, <span class="va">metaDataFile</span>, caption <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p>The optional <code>caption</code> argument defines the data source
displayed caption in the report.</p>
<div class="section level4">
<h4 id="data-file">3.3.1. Data file<a class="anchor" aria-label="anchor" href="#data-file"></a>
</h4>
<p>The Data file can be a blank separated text file or a csv file,
column headers are used later as R variable names, and they must not
contain special letters like blanks. The data is expected to follow a <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html" class="external-link">tidy</a>
format like Nonmem formatted datasets. All data columns used for figures
and tables, must be numerical and listed in the dictionary/meta data
file (details in section <strong>3.3.2</strong>). For data filtering,
these columns and additional ones can be used, the additional columns
may also contain strings. But be careful that these strings do not
contain the column separator blank. A column must be either numerical or
of type string, they must not contain both.</p>
</div>
<div class="section level4">
<h4 id="dictionarymeta-data-file">3.3.2. Dictionary/meta data file<a class="anchor" aria-label="anchor" href="#dictionarymeta-data-file"></a>
</h4>
<p>The dictionary is a csv file mapping the data file. Unlike the Matlab
version of the reporting engine, a regular csv with a comma (“,”) as
separator is expected.</p>
<p>The dictionary file must contain the following variables: ‘ID’,
‘type’, ‘datasetColumn’, ‘datasetUnit’, ‘reportName’, ‘pathID’,
‘comment’. For time profile plots, you must provide
‘<strong>time</strong>’ and ‘<strong>dv</strong>’ in
‘<strong>ID</strong>’. The variable ‘<strong>lloq</strong>’, for lower
limit of quantitation, can also be provided but is not necessary. These
variables need to be mapped to the variable names of the dataset using
the dictionary variable ‘<strong>nonmenColumn</strong>’.</p>
<p>Regarding units, two options are possible:</p>
<ul>
<li>Providing units using only the dictionary: for
‘<strong>time</strong>’ and ‘<strong>dv</strong>’ the column
‘<strong>nonmemUnit</strong>’ should be filled with the corresponding
unit (‘<strong>lloq</strong>’ is assumed with the same unit as
‘<strong>dv</strong>’).</li>
<li>Providing units within the observed data:
<ul>
<li>the dictionary must include the following new variables in
‘<strong>ID</strong>’: ‘<strong>time_unit</strong>’ and
‘<strong>dv_unit</strong>’.</li>
<li>the dictionary must also include the mapping to the variable names
in the dataset using ‘<strong>nonmenColumn</strong>’.</li>
</ul>
</li>
</ul>
<p>The example below shows the template of a dictionary content
available on <a href="https://github.com/Open-Systems-Pharmacology/OSPSuite.ReportingEngine/blob/develop/inst/extdata/tpDictionary.csv" class="external-link">GitHub</a>:</p>
<table class="table">
<caption>Table 3: Template for data dictionary</caption>
<colgroup>
<col width="6%">
<col width="11%">
<col width="13%">
<col width="11%">
<col width="11%">
<col width="19%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="left">ID</th>
<th align="left">type</th>
<th align="left">datasetColumn</th>
<th align="left">datasetUnit</th>
<th align="left">reportName</th>
<th align="left">pathID</th>
<th align="left">comment</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">sid</td>
<td align="left">identifier</td>
<td align="left">SID</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">stud</td>
<td align="left">identifier</td>
<td align="left">STUD</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">time</td>
<td align="left">timeprofile</td>
<td align="left">TIME</td>
<td align="left">h</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">dv</td>
<td align="left">timeprofile</td>
<td align="left">DV</td>
<td align="left">mg/ml</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">tad</td>
<td align="left">timeprofile</td>
<td align="left">TAD</td>
<td align="left">h</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">age</td>
<td align="left">covariate</td>
<td align="left">AGE</td>
<td align="left">year(s)</td>
<td align="left">Age</td>
<td align="left">Organism|Age</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">wght</td>
<td align="left">covariate</td>
<td align="left">WGHT</td>
<td align="left">kg</td>
<td align="left">Body weight</td>
<td align="left">Organism|Weight</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">hght</td>
<td align="left">covariate</td>
<td align="left">HGHT</td>
<td align="left">cm</td>
<td align="left">Height</td>
<td align="left">Organism|Height</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">bmi</td>
<td align="left">covariate</td>
<td align="left">BMI</td>
<td align="left">kg/m2</td>
<td align="left">BMI</td>
<td align="left">Organism|BMI</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">gender</td>
<td align="left">covariate</td>
<td align="left">SEX</td>
<td align="left"></td>
<td align="left">SEX</td>
<td align="left">Gender</td>
<td align="left">Make sure 1=male 2= female</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="outputs">3.4. Outputs<a class="anchor" aria-label="anchor" href="#outputs"></a>
</h3>
<p>For any simulation set, <code>Output</code> objects define which
simulation paths, associated PK parameters and associated observed data
are evaluated. <code>Output</code> objects are also R6 objects created
using the method <code>$new()</code>. Below is the syntax for creating
such <code>Output</code> objects, the next sub-sections will provide
more details on each input:</p>
<p><strong>Output</strong></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va"><a href="../reference/Output.html">Output</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="va">path</span>,</span>
<span>  <span class="va">displayName</span>,</span>
<span>  <span class="va">displayUnit</span>,</span>
<span>  <span class="va">dataSelection</span>,</span>
<span>  <span class="va">dataDisplayName</span>,</span>
<span>  <span class="va">pkParameters</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="path">3.4.1. Path<a class="anchor" aria-label="anchor" href="#path"></a>
</h4>
<p>The input variable <code>path</code> indicates the path name within a
simulation (e.g. ‘<em>Organism|PeripheralVenousBlood|Raltegravir|Plasma
(Peripheral Venous Blood)</em>’) that needs to be included in the
simulation run. Display name and unit for this path can be provided
using <code>displayName</code> and <code>displayUnit</code>.</p>
</div>
<div class="section level4">
<h4 id="data-selection">3.4.2. Data selection<a class="anchor" aria-label="anchor" href="#data-selection"></a>
</h4>
<p>For tasks such as goodness of fit, observed data can be used.
Usually, the data is included into one unique Nonmem data file which
needs to be filtered and associated to the correct
<code>path</code>.</p>
<p>The input variable <code>dataSelection</code> provides a filter for
the Nonmem data file. It must be R readable code, using the Nonmem
headers as variable names (e.g. ‘<em>SID&gt;0</em>’ or ‘<em>AGE&lt;12
&amp; SEX==1</em>’).</p>
<ul>
<li>By default, <code>dataSelection</code> = ‘<strong>NONE</strong>’.
Consequently, no data is selected and no evaluation is performed.</li>
<li>If you want to use all, you can include the filter
<code>dataSelection</code> = ‘<strong>ALL</strong>’.</li>
</ul>
</div>
<div class="section level4">
<h4 id="pk-parameters">3.4.3. PK parameters<a class="anchor" aria-label="anchor" href="#pk-parameters"></a>
</h4>
<p>The input <code>pkParameters</code> indicates the <code>path</code>
related PK parameters that the user wants to include in his analysis. A
list of pk parameter names can be directly provided to this input
(e.g. <em>c(‘C_max’, ‘AUC_inf’)</em>). Display names and display units
will be used as is from the PK parameter objects defined using the
<code>ospsuite</code> package.</p>
<p>In the case different display names or/and units are needed between
the same PK parameters but from different paths, it is also possible to
use <code>PkParameterInfo</code> instances instead of pk parameter names
directly.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va"><a href="../reference/PkParameterInfo.html">PkParameterInfo</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="va">pkParameter</span>,</span>
<span>  <span class="va">displayName</span>, </span>
<span>  <span class="va">displayUnit</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>However, in the case the same display names and units are used, the
better practice is to define or update the PK parameters, their display
names and units beforehand with the <code>ospsuite</code> package, then
to provide directly the list of their names to the input
<code>pkParameters</code>.</p>
<ul>
<li>Updating PK parameters, their display names and units can be done
directly with: <strong>updatePKParameter()</strong>.</li>
<li>Users can also create their own PK parameters using:
<strong>addUserDefinedPKParameter()</strong>.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="application-ranges">3.5. Application Ranges<a class="anchor" aria-label="anchor" href="#application-ranges"></a>
</h3>
<p>If the simulation set corresponds to multiple administrations, the
reported evaluations on some application ranges can be switched on/off.
The input <code>applicationRanges</code> corresponds to the names of
application ranges to include in the report for the simulation set. By
default, all application ranges are included into the report. The enum
<code>ApplicationRanges</code> provide the names of application
ranges.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ApplicationRanges</span></span>
<span><span class="co">#&gt; $total</span></span>
<span><span class="co">#&gt; [1] "total"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $firstApplication</span></span>
<span><span class="co">#&gt; [1] "firstApplication"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $lastApplication</span></span>
<span><span class="co">#&gt; [1] "lastApplication"</span></span></code></pre></div>
<p>This input is then translated in the <code>SimulationSet</code>
objects as a list of logical values defining whether the corresponding
application range is included in the report or not.</p>
</div>
<div class="section level3">
<h3 id="time-offset">3.6. Time Offset<a class="anchor" aria-label="anchor" href="#time-offset"></a>
</h3>
<p>The input <code>timeOffset</code> shifts the time variable of time
profile plots by its value in <code>timeUnit</code>. By default this
value is 0.</p>
<p>This input can be useful for pediatric workflows comparing simulation
sets in the same time profile plot.</p>
<p>In scenarios where multiple applications were defined, the time range
of first application actually becomes the first application after
<code>timeOffset</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="tasks">4. Tasks<a class="anchor" aria-label="anchor" href="#tasks"></a>
</h2>
<div class="section level3">
<h3 id="task-names-and-activation">4.1. Task names and activation<a class="anchor" aria-label="anchor" href="#task-names-and-activation"></a>
</h3>
<p>As illustrated in Figures 1 and 2, workflows perform multiple
evaluations or tasks on a list of simulation sets. Such evaluations are
defined using <code>Task</code> objects which are built-in properties of
<code>Workflow</code> objects. To know which tasks your workflow can
perform, the workflow method <code>getAllTasks()</code> can be used.</p>
<p>Usually, not all the tasks are required to run in a workflow, which
led <code>Task</code> objects to include the logical field
<code>active</code> defining if a task should be performed or not. The
workflow methods <code>getActiveTasks()</code> and
<code>getInactiveTasks()</code> provide the names of active and inactive
tasks of the workflow, respectively. To modify which tasks should be
run, the <code>active</code> field of any task can be updated. The
workflow methods <code>activateTasks(taskNames)</code> and
<code>inactivateTasks(inactivateTasks)</code> provide a fast and easy
way to update which tasks will be run. In particular, their default
value for the input <code>taskNames</code> is
<code>getAllTasks()</code>, meaning that using
<code>activateTasks()</code> without argument will activate every task
of the workflow.</p>
<p>Additionally, the enums <code>StandardSimulationTasks</code> and
<code>StandardPlotTasks</code> respectively provide a quick access to
standard simulation and plot tasks common to mean model and population
workflows.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Names of standard simulation tasks</span></span>
<span><span class="va">StandardSimulationTasks</span></span>
<span><span class="co">#&gt; $simulate</span></span>
<span><span class="co">#&gt; [1] "simulate"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $calculatePKParameters</span></span>
<span><span class="co">#&gt; [1] "calculatePKParameters"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $calculateSensitivity</span></span>
<span><span class="co">#&gt; [1] "calculateSensitivity"</span></span>
<span></span>
<span><span class="co"># Names of standard plot tasks</span></span>
<span><span class="va">StandardPlotTasks</span></span>
<span><span class="co">#&gt; $plotTimeProfilesAndResiduals</span></span>
<span><span class="co">#&gt; [1] "plotTimeProfilesAndResiduals"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $plotPKParameters</span></span>
<span><span class="co">#&gt; [1] "plotPKParameters"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $plotSensitivity</span></span>
<span><span class="co">#&gt; [1] "plotSensitivity"</span></span></code></pre></div>
<p>Using the example shown in section <a href="#id_14-general-scheme">1.4.</a>. The task names in the mean model
workflow were:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># All workflow's tasks</span></span>
<span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="fu">getAllTasks</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "plotSensitivity"              "plotPKParameters"            </span></span>
<span><span class="co">#&gt; [3] "plotAbsorption"               "plotMassBalance"             </span></span>
<span><span class="co">#&gt; [5] "plotTimeProfilesAndResiduals" "calculateSensitivity"        </span></span>
<span><span class="co">#&gt; [7] "calculatePKParameters"        "simulate"</span></span>
<span></span>
<span><span class="co"># Only active tasks that are run</span></span>
<span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="fu">getActiveTasks</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "plotTimeProfilesAndResiduals" "simulate"</span></span>
<span></span>
<span><span class="co"># Only inactive tasks that are not run</span></span>
<span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="fu">getInactiveTasks</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "plotSensitivity"       "plotPKParameters"      "plotAbsorption"       </span></span>
<span><span class="co">#&gt; [4] "plotMassBalance"       "calculateSensitivity"  "calculatePKParameters"</span></span></code></pre></div>
<p>The activation/inactivation of tasks can be done as follows:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inactivate all tasks</span></span>
<span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="fu">inactivateTasks</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="fu">getActiveTasks</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span></span>
<span><span class="co"># Activate only tasks "simulate" and "plotTimeProfilesAndResiduals" tasks</span></span>
<span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="fu">activateTasks</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"simulate"</span>, <span class="st">"plotTimeProfilesAndResiduals"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="fu">getActiveTasks</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "plotTimeProfilesAndResiduals" "simulate"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="required-inputs-to-run-a-task">4.2. Required inputs to run a task<a class="anchor" aria-label="anchor" href="#required-inputs-to-run-a-task"></a>
</h3>
<p>As mentioned above, some tasks can be inactivated. Because some
evaluations can take a lot of time, especially sensitivity analyses, the
use of simulation results as an input of subsequent tasks is
essential.</p>
<p>Before running any task, workflows will check if the task required
input files are available. This feature can also be accessed by users
from the task method <code>getInputs()</code> which can be combined with
the function <code>file.exists</code></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get list of files or folders required to run task "plotTimeProfilesAndResiduals"</span></span>
<span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="va">plotTimeProfilesAndResiduals</span><span class="op">$</span><span class="fu">getInputs</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "myExample-Results/SimulationResults/My example-SimulationResults.csv"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="task-settings">4.3. Task settings<a class="anchor" aria-label="anchor" href="#task-settings"></a>
</h3>
<p><code>Task</code> objects include many properties necessary to log
the evaluations, to ensure a continuity between input and output files
of different tasks and to build the final report of the workflow.</p>
<p>Among the <code>Task</code> properties, the field
<code>settings</code> includes the task properties that can be updated
for the evaluation, log or report of the workflow. The task
<code>settings</code> are R6 objects whose properties can be directly
accessed as shown below (using the character <code>$</code> after
<code>settings</code>).</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get value of settings property "showProgress" for the task "simulate"</span></span>
<span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="va">simulate</span><span class="op">$</span><span class="va">settings</span><span class="op">$</span><span class="va">showProgress</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span></span>
<span><span class="co"># Get value of settings property "digits" for the task "plotPKParameters"</span></span>
<span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="va">plotPKParameters</span><span class="op">$</span><span class="va">settings</span><span class="op">$</span><span class="va">digits</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span></span>
<span><span class="co"># Get the names of the "plotConfigurations" list used during the task "plotTimeProfilesAndResiduals"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">myExampleWorkflow</span><span class="op">$</span><span class="va">plotTimeProfilesAndResiduals</span><span class="op">$</span><span class="va">settings</span><span class="op">$</span><span class="va">plotConfigurations</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "timeProfile" "obsVsPred"   "resVsPred"   "resVsTime"   "resHisto"   </span></span>
<span><span class="co">#&gt; [6] "resQQPlot"   "histogram"   "qqPlot"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="workflow-outputs">5. Workflow outputs<a class="anchor" aria-label="anchor" href="#workflow-outputs"></a>
</h2>
<p>Once the workflow and its settings have been defined, the workflow
method <strong>$runWorkflow()</strong> will run all the active tasks and
generate all the associated results and report. The following outputs
will be generated in <code>workflowFolder</code> directory: logs,
results directories and reports.</p>
<div class="section level3">
<h3 id="logs">5.1. Logs<a class="anchor" aria-label="anchor" href="#logs"></a>
</h3>
<p>Three types of logs can be generated during the creation, design and
run of a workflow:</p>
<ul>
<li>
<strong>log-info.txt</strong> which contains information like
starting time and version numbers of the used software</li>
<li>
<strong>log-error.txt</strong> which contains all errors and
warnings that occurred during the execution</li>
<li>
<strong>log-debug.txt</strong> which contains information useful for
debugging purpose.</li>
</ul>
</div>
<div class="section level3">
<h3 id="result-directories">5.2. Result directories<a class="anchor" aria-label="anchor" href="#result-directories"></a>
</h3>
<p>Each task will save its results in a dedicated directory. The names
of the results directory are as follow:</p>
<ul>
<li>
<strong>SimulationResults</strong> which contains the results of
simulation runs, obtained from <code>simulate</code> task, as csv files.
It is possible to load the results using the <code>ospsuite</code>
method <strong>importResultsFromCSV()</strong>.</li>
<li>
<strong>PKAnalysisResults</strong> which contains the results of PK
analysis runs, obtained from <code>calculatePKParameters</code> task, as
csv files. It is possible to load the results using the
<code>ospsuite</code> method
<strong>importPKAnalysesFromCSV()</strong>.</li>
<li>
<strong>SensitivityResults</strong> which contains the results of
sensitivity analysis runs, obtained from
<code>calculateSensitivity</code> task, as csv files. It is possible to
load the results using the <code>ospsuite</code> method
<strong>importSensitivityAnalysisResultsFromCSV()</strong>.</li>
<li>
<strong>TimeProfiles</strong> which contains the figures obtained
from <code>plotTimeProfilesAndResiduals</code> task and their source
values as png and csv files.</li>
<li>
<strong>PKAnalysis</strong> which contains the figures and tables
obtained from <code>plotPKParameters</code> task and their source values
as png and csv files.</li>
<li>
<strong>Sensitivity</strong> which contains the figures obtained
from <code>plotSensitivity</code> task and their source values as png
and csv files.</li>
<li>
<strong>MassBalance</strong> which contains the figures and tables
obtained from <code>plotMassBalance</code> task and their source values
as png and csv files. This directory is specific of mean model
workflows.</li>
<li>
<strong>Absorption</strong> which contains the figures and tables
obtained from <code>plotAbsorption</code> task and their source values
as png and csv files. This directory is specific of mean model
workflows.</li>
<li>
<strong>Demography</strong> which contains the figures and tables
obtained from <code>plotDemography</code> task and their source values
as png and csv files. This directory is specific of population model
workflows.</li>
</ul>
<p>Default figure format is png, but it is possible to change this
default using <strong>setPlotFormat()</strong>.</p>
</div>
<div class="section level3">
<h3 id="reports-and-appendices">5.3. Reports and appendices<a class="anchor" aria-label="anchor" href="#reports-and-appendices"></a>
</h3>
<p>Each plot task will save an appendix file besides its results as a
markdown format report. These appendices are saved directly within the
<code>workflowFolder</code> directory results directory with the
following names:</p>
<ul>
<li>
<strong>appendix-time-profile.md</strong> from
<code>plotTimeProfilesAndResiduals</code> task.</li>
<li>
<strong>appendix-pk-parameters.md</strong> from
<code>plotPKParameters</code> task.</li>
<li>
<strong>appendix-sensitivity-analysis.md</strong> from
<code>plotSensitivity</code> task.</li>
<li>
<strong>appendix-mass-balance.md</strong> from
<code>plotMassBalance</code> task.</li>
<li>
<strong>appendix-absorption.md</strong> from
<code>plotAbsorption</code> task.</li>
<li>
<strong>appendix-demography.md</strong> from
<code>plotDemography</code> task.</li>
</ul>
<p>At the end of the workflow run, all the available appendices are
combined into final reports:</p>
<ul>
<li>
<strong>Report.md</strong> which contains the markdown version of
the report, including a table of content and numbering the figures and
tables.</li>
<li>
<strong>Report-word.md</strong> which contains a markdown version of
the report to be translated by <em>pandoc</em> for generating the word
report.</li>
<li>
<strong>Report.docx</strong> which contains the word version of the
report, including a table of content and numbering the figures and
tables.</li>
</ul>
<p>The option <code>createWordReport</code> is set to
<strong>TRUE</strong> as default but can be set to
<strong>FALSE</strong> to prevent the conversion of
<strong>Report-word.md</strong> into <strong>Report.docx</strong> using
<em>pandoc</em> .</p>
</div>
</div>
<div class="section level2">
<h2 id="templates">6. Templates<a class="anchor" aria-label="anchor" href="#templates"></a>
</h2>
<p>For creating or tuning reports, starting from scratch could be
challenging. For this reason, some templates have been created to make
it easier. The table below provides a list of templates available on
GitHub and their usage.</p>
<table class="table">
<colgroup>
<col width="39%">
<col width="21%">
<col width="39%">
</colgroup>
<thead><tr class="header">
<th>Template</th>
<th>Link</th>
<th>Usage</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Excel workflow input</td>
<td><a href="https://github.com/Open-Systems-Pharmacology/OSPSuite.ReportingEngine/blob/develop/inst/extdata/WorkflowInput.xlsx" class="external-link">WorkflowInput.xlsx</a></td>
<td><code>createWorkflowFromExcelInput</code></td>
</tr>
<tr class="even">
<td>Word reference report</td>
<td><a href="https://github.com/Open-Systems-Pharmacology/OSPSuite.ReportingEngine/blob/develop/inst/extdata/reference.docx" class="external-link">reference.docx</a></td>
<td>
<code>wordConversionTemplate</code> argument of
<code>Worklfow</code> objects</td>
</tr>
<tr class="odd">
<td>Qualification workflow script</td>
<td><a href="https://github.com/Open-Systems-Pharmacology/OSPSuite.ReportingEngine/blob/develop/inst/extdata/qualification-workflow-template.R" class="external-link">qualification-workflow-template.R</a></td>
<td>Source file to create function
<code>createQualificationReport</code>
</td>
</tr>
<tr class="even">
<td>Observed data dictionary</td>
<td><a href="https://github.com/Open-Systems-Pharmacology/OSPSuite.ReportingEngine/blob/develop/inst/extdata/tpDictionary.csv" class="external-link">tpDictionary.csv</a></td>
<td>
<code>observedMetaDataFile</code> argument of
<code>SimulationSet</code> objects</td>
</tr>
<tr class="odd">
<td>json theme</td>
<td><a href="https://github.com/Open-Systems-Pharmacology/OSPSuite.ReportingEngine/blob/develop/inst/extdata/re-theme.json" class="external-link">re-theme.json</a></td>
<td><code>setDefaultThemeFromJson</code></td>
</tr>
</tbody>
</table>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Michael Sevestre, Juri Solodenko, Pierre Chelle, Abdullah Hamadeh.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
